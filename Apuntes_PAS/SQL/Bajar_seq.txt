-- CREAR TABLA POR_CCONTEN04 , Y UN CAMPO IDENTI_CCONTEN01 AUXILIAR PARA SABER CUAL ERA EL IDENTI ORIGINAL (POSTERIOR UPDATE DEL PADRE)
CREATE TABLE POR_CCONTEN04(IDENTI, IDENTI_CCONTEN01,
ALIURI,
FECACT,
FECCAM,
USUCAM,
FECCRE,
USUCRE,
DESCRI,
IDIOMA,
ORDIND,
PADRE,
FECIPU,
FECFPU,
ESPACI,
ESTADO,
TITULO,
TIPO,
CONTEN,
TEMPLA,
PERGSP,
TITHTM,
PALCLA,
OBSERV)
AS
(SELECT SEC_POR_CCONTEN04_IDENTI.NEXTVAL,IDENTI,ALIURI,
FECACT,
FECCAM,
USUCAM,
FECCRE,
USUCRE,
DESCRI,
IDIOMA,
ORDIND,
PADRE,
FECIPU,
FECFPU,
ESPACI,
ESTADO,
TITULO,
TIPO,
CONTEN,
TEMPLA,
PERGSP,
TITHTM,
PALCLA,
OBSERV FROM (select IDENTI, ALIURI,
FECACT,
FECCAM,
USUCAM,
FECCRE,
USUCRE,
DESCRI,
IDIOMA,
ORDIND,
PADRE,
FECIPU,
FECFPU,
ESPACI,
ESTADO,
TITULO,
TIPO,
CONTEN,
TEMPLA,
PERGSP,
TITHTM,
PALCLA,
OBSERV FROM POR_CCONTEN01 ORDER BY IDENTI));

-- CAMBIAR PADRE IDENTI ANTIGUO (IDENTI_CCONTEN01) POR IDENTI NUEVO 
UPDATE POR_CCONTEN04 A SET A.PADRE = (SELECT B.IDENTI FROM POR_CCONTEN04 B WHERE A.PADRE=B.IDENTI_CCONTEN01);

-- BORRAR CAMPO IDENTI_CCONTEN01
ALTER TABLE POR_CCONTEN04 DROP COLUMN IDENTI_CCONTEN01;

-- COPIAR TABLA POR_CCONTEN01 A POR_CCONTEN05 (DEVELOPER)

-- BORRAR DATOS POR_CCONTEN01
DELETE FROM POR_CCONTEN01;

-- COPIAR DATOS DE CONTEN04 A CONTEN01
INSERT INTO POR_CCONTEN01(SELECT * FROM POR_CCONTEN04);

-- RESTABLECER EL VALOR DE LA SECUENCIA CONTEN01 A LO QUE CORRESPONDA